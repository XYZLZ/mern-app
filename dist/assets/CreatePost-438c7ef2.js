import{u as L,r as s,h as n,m as x,j as t,F as T,a as r,L as $,b as c,S as p}from"./index-9105bffc.js";import{p as O}from"./preview-16f2a924.js";import{g as W}from"./index-80b1f8a7.js";import{F as d}from"./FormField-6c9d36c9.js";const A=()=>{const i=L(),b=async a=>{try{const y=await(await fetch(`${c}user/id`,{headers:{authorization:`Bearer ${n}`}})).json(),{user:P}=y.data;l({name:P}),console.log(y)}catch(o){console.log(o)}};s.useEffect(()=>{n||i("/login"),(x=="BASIC"||x==null)&&i("/home"),b()},[]);const[e,l]=s.useState({name:"",photo:"",prompt:"",photoName:"",category:""}),[h,u]=s.useState(!1),[w,g]=s.useState(!1),[N,f]=s.useState(!1),v=async()=>{if(e.prompt)try{u(!0);const o=await(await fetch(`${c}dalle`,{method:"POST",headers:{"Content-Type":"application/json",authorization:`Bearer ${n}`},body:JSON.stringify({prompt:e.prompt})})).json();console.log(o),l({...e,photo:`data:image/jpeg;base64,${o.photo}`})}catch(a){console.log(a)}finally{u(!1)}else p("Warning","please enter a prompt","warning",7e3)},S=async a=>{if(a.preventDefault(),e.prompt&&e.photo&&e.photoName&&(e.category!="none"||e.category!=null)){g(!0);try{await(await fetch(`${c}post`,{method:"POST",headers:{"Content-Type":"application/json",authorization:`Bearer ${n}`},body:JSON.stringify({...e,isGlobal:!0,isWithAI:!0})})).json(),i("/home")}catch(o){console.log(o)}finally{g(!1)}}else p("Warning","please enter a prompt and upload an image","warning",7e3)},j=async a=>{if(a.preventDefault(),e.prompt&&e.photo){f(!0);try{await(await fetch(`${c}post`,{method:"POST",headers:{"Content-Type":"application/json",authorization:`Bearer ${n}`},body:JSON.stringify({...e,isGlobal:!1})})).json(),p("success","Post Created","success",3e3),setTimeout(()=>{i("/my-post")},4e3)}catch(o){console.log(o)}finally{f(!1)}}else p("Warning","please enter a prompt and upload an image","warning",7e3)},m=a=>l({...e,[a.target.name]:a.target.value}),C=()=>{const a=W(e.prompt);l({...e,prompt:a})};return t(T,{children:r("section",{className:"max-w-7xl mx-auto",children:[r("div",{children:[t("h1",{className:"font-extrabold text-[#222328] text-[32px] text-center mt-5",children:" Create"}),t("p",{className:"mt-2 text-[#666e75] text-[16px] max-w[500px] text-center ",children:"Generate an imaginative image through DALL-E AI and share it with the community"})]}),r("form",{method:"post",className:"mt-16 max-w text-3xl",onSubmit:S,children:[r("div",{className:"flex flex-col gap-5",children:[t(d,{isDisabled:!0,LabelName:"User Name",type:"text",name:"name",placeholder:"Write your name",value:e.name,handleChange:m}),t(d,{LabelName:"Photo Name",type:"text",name:"photoName",placeholder:"Write the name for your image",value:e.photoName,handleChange:m}),t(d,{isMultiple:!0,LabelName:"Category",name:"category",value:e.category,handleChange:m}),t(d,{LabelName:"prompt",type:"text",name:"prompt",placeholder:"Write your prompt",value:e.prompt,handleChange:m,isSurpriseMe:!0,handleSurpriseMe:C}),r("div",{className:"relative bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 w-64 p-3 h-64  flex items-center justify-center",children:[e.photo?t("img",{src:e.photo,alt:e.prompt,className:"w-full h-full object-contain"}):t("img",{src:O,alt:"preview",className:"w-9/12 object-contain opacity-40"}),h&&t("div",{className:"absolute inset-0 z-0 flex justify-center items-center bg-[rgba(0,0,0,.5)] rounded-lg",children:t($,{})})]})]}),t("div",{className:"mt-5 flex gap-5",children:t("button",{className:"text-white bg-green-700 font-medium rounded-md text-sm w-full sm:w-auto px-5 py-2.5 text-center",type:"button",onClick:v,children:h?"Generating..":"Generate"})}),r("div",{className:"mt-10",children:[t("p",{className:"mt-2 text-[#666e75] text-[14px]",children:"** Once you have created the image you want, you can share it with others in the community **"}),t("button",{type:"submit",id:"share",className:"mt-3 text-white bg-[#6469ff] font-medium rounded-md text-sm w-full sm:w-auto px-5 py-2.5 text-center",children:w?"Sharing...":"Share with the Community"}),t("button",{type:"submit",id:"privatePost",onClick:j,className:"mt-3 ml-5 text-white bg-[#6469ff] font-medium rounded-md text-sm w-full sm:w-auto px-5 py-2.5 text-center",children:N?"Saving...":"Save"})]})]})]})})};export{A as default};
