import{r as l,u as h,j as s,a,c as g,b as p}from"./index-9105bffc.js";const v=()=>{const[t,c]=l.useState({email:"",pass:""}),[i,o]=l.useState(""),d=h();l.useEffect(()=>{sessionStorage.getItem("token")&&d("/home")},[]);const u=async r=>{r.preventDefault();try{const n=`${p}user/login`,e=await(await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json();if(e.status==500&&o("Incorrect Email or password"),e.error)return o(e.error.message),!1;if(e.message)return console.log(e),o(e.message),!1;console.log(e),e.token&&(sessionStorage.setItem("token",e.token),sessionStorage.setItem("userId",e.user._id),sessionStorage.setItem("user",e.user.user),sessionStorage.setItem("userEmail",e.user.email),sessionStorage.setItem("memberType",e.user.memberType),window.location.replace("/home"))}catch(n){console.log(n.message)}},m=({currentTarget:r})=>{c({...t,[r.name]:r.value})};return s("div",{className:"w-full h-screen overflow-hidden dark:bg-gray-800",children:a("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:[s("h1",{className:"text-center text-black font-bold  text-3xl mb-6 dark:text-white",children:"Login"}),s("div",{className:"bg-white py-8 px-6 shadow rounded-lg sm:px-10 dark:bg-gray-700",children:a("form",{method:"post",className:"mb-0 space-y-6",onSubmit:u,children:[a("div",{children:[s("label",{htmlFor:"email",className:"form__label font-medium",children:"Email Address"}),s("div",{className:"mt-1",children:s("input",{type:"email",value:t.email,name:"email",className:"form__input",onChange:m,required:!0})})]}),a("div",{children:[s("label",{htmlFor:"pass",className:"form__label font-medium",children:"Password"}),s("div",{className:"mt-1",children:s("input",{type:"password",value:t.pass,name:"pass",className:"form__input",onChange:m,required:!0})})]}),a("div",{children:[a("div",{className:"mt-1",children:[s("button",{type:"submit",className:"form__btn",children:"Sign In"}),i&&s("div",{className:"error_msg font-medium",children:i})]}),a("p",{className:"text-center text-gray-800 mt-6 dark:text-white",children:["You don't have account? ",s(g,{to:"/register",className:"text-[var(--primary)] hover:opacity-80",children:"Register"})]})]})]})})]})})};export{v as default};
